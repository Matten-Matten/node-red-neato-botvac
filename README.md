# node-red-contrib-neato-botvac
Node-Red node for Neato Botvac robots

Depends on [node-botvac](https://www.npmjs.com/package/node-botvac)

## Configuration

1. Place "neato botvac" node
2. Open configuration of node and click on the pencil button to create a new neato configuration
3. Enter eMail and password of your neato account (you need to be registered!)
4. Configure the index of the robot (0 - first robot, 1 - second robot, ...)

## Usage

### Status-Update
If you want to get a status update of the robot the payload needs to be value 'true'.
Following output is generated by the web api of neato:
```json
{
	"payload":
		{
			"version":1,
			"reqId":"77",
			"result":"ok",
			"data":{},
			"error":null,
			"alert":"nav_floorplan_load_fail",
			"state":1,
			"action":0,
			"cleaning":
			{
				"category":2,
				"mode":2,
				"modifier":1,
				"navigationMode":1,
				"spotWidth":0,
				"spotHeight":0
			},
			"details":
			{
				"isCharging":false,
				"isDocked":true,
				"isScheduleEnabled":true,
				"dockHasBeenSeen":false,
				"charge":95
			},
			"availableCommands":
			{
				"start":true,
				"stop":false,
				"pause":false,
				"resume":false,
				"goToBase":false
			},
			"availableServices":
			{
				"findMe":"basic-1",
				"generalInfo":"basic-1",
				"houseCleaning":"basic-3",
				"IECTest":"advanced-1",
				"logCopy":"basic-1",
				"maps":"macro-1",
				"preferences":"basic-2",
				"schedule":"minimal-1",
				"softwareUpdate":"basic-1",
				"spotCleaning":"minimal-2",
				"wifi":"basic-1"
			},
			"meta":
			{
				"modelName":"BotVacD5Connected",
				"firmware":"4.5.0-179"
			}
		},
		"topic":"result",
		"_msgid":"f407cae1.707da8"
	}
```

For more information about the possible output visit [Neato Robot Remote Protocol](https://developers.neatorobotics.com/api/robot-remote-protocol)
or [Neato Nucleo Api](https://developers.neatorobotics.com/api/nucleo)

### Commands
The following commands are available at the moment:
#### start
```json
{"command":"start","eco":true,"navigationmode":1,"nogolines":false}
```
#### pause
```json
{"command":"pause"}
```
#### stop
```json
{"command":"stop"}
```
#### sendtobase
Available only on some models!
```json
{"command":"sendtobase"}
```
#### findme
```json
{"command":"findme"}
```

##ToDo
* Boundary
* Maps
* Get alerts and erros as text
* ... 